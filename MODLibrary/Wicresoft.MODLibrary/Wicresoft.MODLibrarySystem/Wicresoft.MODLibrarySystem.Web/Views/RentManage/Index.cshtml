@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@model Wicresoft.MODLibrarySystem.Web.Models.RentManage.RentManageIndexModel
@Scripts.Render("~/Scripts/ui/jquery-ui.js")
@Scripts.Render("~/Scripts/RentManageJS/RentIndexJS.js")

<style type="text/css">
    table {
        table-layout: fixed;
    }

    td {
        white-space: nowrap;
        overflow: hidden;
        word-break: keep-all;
    }
</style>

<h2>Index</h2>

@using (Html.BeginForm())
{
    <div class="jumbotron" style="height:700px;">
        <div style="width:500px; height:500px; border:1px; float:left">
            <table style="width:500px;">
                <caption>User Request</caption>
                <thead>
                    <tr>
                        <td colspan="7">
                            @Html.ActionLink("More", "UserRequest")
                        </td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            Title
                        </td>
                        <td>
                            Author
                        </td>
                        <td>
                            Publisher
                        </td>
                        <td>
                            User Name
                        </td>
                        <td>
                            Email
                        </td>
                        <td>
                            Floor
                        </td>
                        <td>
                            Operation
                        </td>
                    </tr>
                    @foreach (var item in this.Model.UserRequestList)
                    {
                        string approveButtonId = "approveuserRequestButton" + @item.ID.ToString();
                        string rejectButtonId = "rejectuserRequestButton" + @item.ID.ToString();
                        <tr>
                            <td>
                                @item.Title
                            </td>
                            <td>
                                @item.Author
                            </td>
                            <td>
                                @item.Publish
                            </td>
                            <td>
                                @item.UserName
                            </td>
                            <td>
                                @item.Email
                            </td>
                            <td>
                                @item.Floor
                            </td>
                            <td>
                                <a id= @approveButtonId onclick="approveUserRequestButton(@item.ID);">A</a>
                                <a id = @rejectButtonId onclick="rejectUserRequestDialogShow(@item.ID);">R</a>
                            </td>
                        </tr>
                    }
            </table>
        </div>
        <div style="width:500px; height:500px;border:1px;float:right;">
            <table style=" width:500px">
                <caption>Waiting For Take</caption>
                <thead>

                    <tr>
                        <td colspan="5">
                            @Html.ActionLink("More", "WaitingForTake")
                        </td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            Title
                        </td>
                        <td>
                            User Name
                        </td>
                        <td>
                            Email
                        </td>
                        <td>
                            Floor
                        </td>
                        <td>
                            Operation
                        </td>
                    </tr>
                    @foreach (var item in this.Model.WaitingForTakeModelList)
                    {
                        <tr>
                            <td>
                                @item.Title
                            </td>
                            <td>
                                @item.UserName
                            </td>
                            <td>
                                @item.Email
                            </td>
                            <td>
                                @item.Floor
                            </td>
                            <td>
                                <button>Approval</button>
                                <button>Reject</button>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
        <div style="width:500px; height:500px;border:1px; float:left ">
            <table style="width:500px;">
                <caption>Waiting for Return</caption>
                <thead>

                    <tr>
                        <td colspan="5">
                            @Html.ActionLink("More", "WaitingForReturn")
                        </td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            Title
                        </td>
                        <td>
                            User Name
                        </td>
                        <td>
                            Expiration Day
                        </td>
                        <td>
                            Delay
                        </td>
                        <td>
                            Operation
                        </td>
                    </tr>
                    @foreach (var item in this.Model.WaitingForReturnModelList)
                    {
                        <tr>
                            <td>
                                @item.Title
                            </td>
                            <td>
                                @item.UserName
                            </td>
                            <td>
                                @item.ExpirationDay
                            </td>
                            <td>
                                3
                            </td>
                            <td>
                                <button>Approval</button>
                                <button>Reject</button>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
        <div style="width:500px; height:500px;border:1px; float:right ">
            <table style="width:500px;">
                <caption>RentHistory</caption>
                <thead>
                    <tr>
                        <td colspan="4">
                            @Html.ActionLink("More", "RentHistory")
                        </td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            Title
                        </td>
                        <td>
                            User Name
                        </td>
                        <td>
                            Rent Date(Form)
                        </td>
                        <td>
                            Rent Date(To)
                        </td>
                    </tr>
                    @foreach (var item in this.Model.ReadHistoryModelList)
                    {
                        <tr>
                            <td>
                                @item.Title
                            </td>
                            <td>
                                @item.UserName
                            </td>
                            <td>
                                @item.RentDateFrom
                            </td>
                            <td>
                                @item.RentDateTo
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>

    </div>
}

    <div style="display: none" id="RejectUserRequestDialog" title="Reject item">
        <p>
            You will reject this request. Please input your reason.<br />
            <br />
            <input type="checkbox" id="setThisBookError" onclick="checkSetThisBookError()" />Mark this book's status as "Error".
            <br />
            <br />
            <textarea id="comments" style="width:400px; height:100px">The MOD Library is arranging books.</textarea>
        </p>
    </div>

<div style="display: none" id="RejectUserRequestURL" requstUrl ="@Url.Action("RejectUserRequest", "RentManage")"></div>
<div style="display: none" id="ApproveUserRequestURL" requsturl="@Url.Action("ApproveUserRequest", "RentManage")"></div>